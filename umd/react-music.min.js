!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactMusic=t(require("react")):e.ReactMusic=t(e.React)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Synth=t.Song=t.Sampler=t.Sequencer=t.Reverb=t.PingPong=t.Phaser=t.Overdrive=t.Monosynth=t.MoogFilter=t.LFO=t.Gain=t.Filter=t.Delay=t.Compressor=t.Chorus=t.Bitcrusher=t.Bus=t.Analyser=void 0;var r=n(1),i=o(r),a=n(3),s=o(a),u=n(5),c=o(u),l=n(6),p=o(l),f=n(7),h=o(f),d=n(8),y=o(d),b=n(9),v=o(b),m=n(10),g=o(m),P=n(11),T=o(P),_=n(12),x=o(_),w=n(18),k=o(w),O=n(19),j=o(O),N=n(20),C=o(N),M=n(21),L=o(M),R=n(22),q=o(R),G=n(23),S=o(G),E=n(24),F=o(E),D=n(26),A=o(D),I=n(28),B=o(I);t.Analyser=i["default"],t.Bus=c["default"],t.Bitcrusher=s["default"],t.Chorus=p["default"],t.Compressor=h["default"],t.Delay=y["default"],t.Filter=v["default"],t.Gain=g["default"],t.LFO=T["default"],t.MoogFilter=k["default"],t.Monosynth=x["default"],t.Overdrive=j["default"],t.Phaser=C["default"],t.PingPong=L["default"],t.Reverb=q["default"],t.Sequencer=S["default"],t.Sampler=F["default"],t.Song=A["default"],t.Synth=B["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.visualization=n.audioContext.createScriptProcessor(2048,1,1),o.visualization.connect(n.audioContext.destination),o.connectNode=n.audioContext.createAnalyser(),o.connectNode.connect(n.connectNode),o.applyProps=o.applyProps.bind(o),o.visualization.onaudioprocess=function(){e.onAudioProcess(o.connectNode)},o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){this.applyProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.applyProps(e)}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"applyProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);p.propTypes={children:c.PropTypes.node,fftSize:c.PropTypes.number,onAudioProcess:c.PropTypes.func,smoothingTimeConstant:c.PropTypes.number},p.defaultProps={fftSize:128,onAudioProcess:function(){},smoothingTimeConstant:.3},p.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},p.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=p},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Bitcrusher({bits:e.bits,normfreq:e.normfreq,bufferSize:e.bufferSize}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bits:c.PropTypes.number,bufferSize:c.PropTypes.number,children:c.PropTypes.node,normfreq:c.PropTypes.number},h.defaultProps={bits:4,bufferSize:4096,normfreq:.1},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){!function(t){function n(){return o}function o(e){if(!(this instanceof o))return new o(e);if(t.AudioContext||(t.AudioContext=t.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=t.AudioContext&&new t.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");r(e),l=e,p=this}function r(e){function t(){var e=arguments[0];return arguments[0]=h.isPrototypeOf?h.isPrototypeOf(e)?e.input:e:e.input||e,r.apply(this,arguments),e}if(e.__connectified__!==!0){var n=e.createGain(),o=Object.getPrototypeOf(Object.getPrototypeOf(n)),r=o.connect;o.connect=t,e.__connectified__=!0}}function i(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function a(e,t){var n,o,r=0,i=0,a=0,s=0;return n=e.toExponential().match(/^.\.?(.*)e(.+)$/),r=parseInt(n[2],10)-(n[1]+"").length,n=t.toExponential().match(/^.\.?(.*)e(.+)$/),i=parseInt(n[2],10)-(n[1]+"").length,i>r&&(r=i),o=e%t,r<-100||r>20?(a=Math.round(Math.log(o)/Math.log(10)),s=Math.pow(10,a),(o/s).toFixed(a-r)*s):parseFloat(o.toFixed(-r))}function s(e){return 0===e?1:Math.abs(e)/e}function u(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function c(e,t){return void 0===e?t:e}var l,p,f=function(e,t){e.value=t},h=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t+1].input?e[t].connect(e[t+1].input):e[t].connect(e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(e,t,n,o){var r,i=o?~~(o/1e3):l.currentTime,a=n?~~(n/1e3):0,s=this.defaults[e],u=this[e];u?s.automatable?(n?(r="linearRampToValueAtTime",u.cancelScheduledValues(i),u.setValueAtTime(u.value,i)):r="setValueAtTime",u[r](t,a+i)):u=t:console.error("Invalid Property for "+this.name)}}}),d="float",y="boolean",b="string",v="int";"undefined"!=typeof e&&e.exports?e.exports=o:t.define("Tuna",n),o.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,o,r,i,a=0,s=0;this.processor.onaudioprocess=function(e){for(t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),o=Math.pow(.5,this.bits),i=t.length,r=0;r<i;r++)a+=this.normfreq,a>=1&&(a-=1,s=o*Math.floor(t[r]/o+.5)),n[r]=s},this.bits=e.bits||this.defaults.bits.value,this.normfreq=c(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||!1},o.prototype.Bitcrusher.prototype=Object.create(h,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:v},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:v},bypass:{value:!1,automatable:!1,type:y},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:d}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),o.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=c(e.makeupGain,this.defaults.makeupGain),this.bypass=e.bypass||!1},o.prototype.Cabinet.prototype=Object.create(h,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:y}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new p.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),o.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.attenuator=this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.delayL=l.createDelay(),this.delayR=l.createDelay(),this.feedbackGainNodeLR=l.createGain(),this.feedbackGainNodeRL=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new p.LFO({target:this.delayL.delayTime,callback:f}),this.lfoR=new p.LFO({target:this.delayR.delayTime,callback:f}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=c(e.feedback,this.defaults.feedback.value),this.rate=c(e.rate,this.defaults.rate.value),this.delay=c(e.delay,this.defaults.delay.value),this.depth=c(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},o.prototype.Chorus.prototype=Object.create(h,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:d},delay:{value:.0045,min:0,max:1,automatable:!1,type:d},depth:{value:.7,min:0,max:1,automatable:!1,type:d},rate:{value:1.5,min:0,max:8,automatable:!1,type:d},bypass:{value:!1,automatable:!1,type:y}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2e-4*(2*Math.pow(10,e)),this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),o.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.compNode=this.activateNode=l.createDynamicsCompressor(),this.makeupNode=l.createGain(),this.output=l.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=c(e.automakeup,this.defaults.automakeup.value),this.makeupGain=c(e.makeupGain,this.defaults.makeupGain.value),this.threshold=c(e.threshold,this.defaults.threshold.value),this.release=c(e.release,this.defaults.release.value),this.attack=c(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=c(e.knee,this.defaults.knee.value),this.bypass=e.bypass||!1},o.prototype.Compressor.prototype=Object.create(h,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:d},release:{value:250,min:10,max:2e3,automatable:!0,type:d},makeupGain:{value:1,min:1,max:100,automatable:!0,type:d},attack:{value:1,min:0,max:1e3,automatable:!0,type:d},ratio:{value:4,min:1,max:50,automatable:!0,type:d},knee:{value:5,min:0,max:40,automatable:!0,type:d},automakeup:{value:!1,automatable:!1,type:y},bypass:{value:!1,automatable:!1,type:y}}},computeMakeup:{value:function(){var e=4,t=this.compNode;return-(t.threshold.value-t.threshold.value/t.ratio.value)/e}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release.value=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=i(e)}}}),o.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=l.createConvolver(),this.dry=l.createGain(),this.filterLow=l.createBiquadFilter(),this.filterHigh=l.createBiquadFilter(),this.wet=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=c(e.dryLevel,this.defaults.dryLevel.value),this.wetLevel=c(e.wetLevel,this.defaults.wetLevel.value),this.highCut=e.highCut||this.defaults.highCut.value,this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.lowCut=e.lowCut||this.defaults.lowCut.value,this.level=c(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=e.bypass||!1},o.prototype.Convolver.prototype=Object.create(h,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:d},lowCut:{value:20,min:20,max:22050,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},wetLevel:{value:1,min:0,max:1,automatable:!0,type:d},level:{value:1,min:0,max:1,automatable:!0,type:d}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var t=this.convolver,n=new XMLHttpRequest;return e?(n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status<300&&n.status>199||302===n.status)&&l.decodeAudioData(n.response,function(e){t.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},void n.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),o.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.dry=l.createGain(),this.wet=l.createGain(),this.filter=l.createBiquadFilter(),this.delay=l.createDelay(),this.feedbackNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedback=c(e.feedback,this.defaults.feedback.value),this.wetLevel=c(e.wetLevel,this.defaults.wetLevel.value),this.dryLevel=c(e.dryLevel,this.defaults.dryLevel.value),this.cutoff=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||!1},o.prototype.Delay.prototype=Object.create(h,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:d},feedback:{value:.45,min:0,max:.9,automatable:!0,type:d},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),o.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.filter=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=c(e.filterType,this.defaults.filterType.value),this.gain=c(e.gain,this.defaults.gain.value),this.bypass=e.bypass||!1},o.prototype.Filter.prototype=Object.create(h,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:d},Q:{value:1,min:.001,max:100,automatable:!0,type:d},gain:{value:0,min:-40,max:40,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:y},filterType:{value:"lowpass",automatable:!1,type:b}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),o.prototype.MoogFilter=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,o,r,i,a,s,u;t=n=o=r=i=a=s=u=0;var p,f,h,d,y,b,v;this.processor.onaudioprocess=function(e){for(p=e.inputBuffer.getChannelData(0),f=e.outputBuffer.getChannelData(0),h=1.16*this.cutoff,v=.35013*(h*h)*(h*h),d=this.resonance*(1-.15*h*h),b=p.length,y=0;y<b;y++)p[y]-=u*d,p[y]*=v,i=p[y]+.3*t+(1-h)*i,t=p[y],a=i+.3*n+(1-h)*a,n=i,s=a+.3*o+(1-h)*s,o=a,u=s+.3*r+(1-h)*u,r=s,f[y]=u},this.cutoff=c(e.cutoff,this.defaults.cutoff.value),this.resonance=c(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||!1},o.prototype.MoogFilter.prototype=Object.create(h,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:v},bypass:{value:!1,automatable:!1,type:y},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:d},resonance:{value:3.5,min:0,max:4,automatable:!1,type:d}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),o.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.inputDrive=l.createGain(),this.waveshaper=l.createWaveShaper(),this.outputDrive=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=c(e.drive,this.defaults.drive.value),this.outputGain=c(e.outputGain,this.defaults.outputGain.value),this.curveAmount=c(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=c(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||!1},o.prototype.Overdrive.prototype=Object.create(h,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:d},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:v}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=i(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,n){e=Math.min(e,.9999);var o,r,i=2*e/(1-e);for(o=0;o<t;o++)r=2*o/t-1,n[o]=(1+i)*r/(1+i*Math.abs(r))},function(e,t,n){var o,r,i;for(o=0;o<t;o++)r=2*o/t-1,i=(.5*Math.pow(r+1.4,2)-1)*i>=0?5.8:1.2,n[o]=u(i)},function(e,t,n){var o,r,i,a=1-e;for(o=0;o<t;o++)r=2*o/t-1,i=r<0?-Math.pow(Math.abs(r),a+.04):Math.pow(r,a),n[o]=u(2*i)},function(e,t,n){var o,r,i,a,u=1-e>.99?.99:1-e;for(o=0;o<t;o++)r=2*o/t-1,a=Math.abs(r),a<u?i=a:a>u?i=u+(a-u)/(1+Math.pow((a-u)/(1-u),2)):a>1&&(i=a),n[o]=s(r)*i*(1/((u+1)/2))},function(e,t,n){var o,r;for(o=0;o<t;o++)r=2*o/t-1,r<-.08905?n[o]=-.75*(1-Math.pow(1-(Math.abs(r)-.032857),12)+1/3*(Math.abs(r)-.032847))+.01:r>=-.08905&&r<.320018?n[o]=-6.153*(r*r)+3.9375*r:n[o]=.630035},function(e,t,n){var o,r,i=2+Math.round(14*e),a=Math.round(Math.pow(2,i-1));for(o=0;o<t;o++)r=2*o/t-1,n[o]=Math.round(r*a)/a}]}}),o.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=l.createGain(),this.feedbackGainNodeR=l.createGain(),this.merger=l.createChannelMerger(2),this.filteredSignal=l.createGain(),this.output=l.createGain(),this.lfoL=new p.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new p.LFO({target:this.filtersR,callback:this.callback});for(var t=this.stage;t--;)this.filtersL[t]=l.createBiquadFilter(),this.filtersR[t]=l.createBiquadFilter(),this.filtersL[t].type="allpass",this.filtersR[t].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=c(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=c(e.depth,this.defaults.depth.value),this.feedback=c(e.feedback,this.defaults.feedback.value),this.stereoPhase=c(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},o.prototype.Phaser.prototype=Object.create(h,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:d},depth:{value:.6,min:0,max:1,automatable:!1,type:d},feedback:{value:.7,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:d},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:d}}},callback:{value:function(e,t){for(var n=0;n<4;n++)e[n].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=a(t,2*Math.PI),this.lfoR._phase=t}}}),o.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.wetLevel=l.createGain(),this.stereoToMonoMix=l.createGain(),this.feedbackLevel=l.createGain(),this.output=l.createGain(),this.delayLeft=l.createDelay(),this.delayRight=l.createDelay(),this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.merger=l.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||!1},o.prototype.PingPongDelay.prototype=Object.create(h,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:v},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:v},feedback:{value:.3,min:0,max:1,automatable:!1,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:d}}}}),o.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.amplitudeL=l.createGain(),this.amplitudeR=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new p.LFO({target:this.amplitudeL.gain,callback:f}),this.lfoR=new p.LFO({target:this.amplitudeR.gain,callback:f}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=c(e.intensity,this.defaults.intensity.value),this.stereoPhase=c(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},o.prototype.Tremolo.prototype=Object.create(h,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:d},rate:{value:5,min:.1,max:11,automatable:!1,type:d}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._rate},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=a(t,2*Math.PI),this.lfoR.phase=t}}}),o.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),
this.envelopeFollower=new p.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=l.createBiquadFilter(),this.filterPeaking=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=c(e.enableAutoMode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=c(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=c(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=c(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||!1},o.prototype.WahWah.prototype=Object.create(h,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:y},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:d},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:d},sweep:{value:.2,min:0,max:1,automatable:!1,type:d},resonance:{value:10,min:1,max:100,automatable:!1,type:d},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:d}}},activateCallback:{value:function(e){this.automode=e}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep,this.filterPeaking.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep.value},set:function(e){this._sweep=Math.pow(e>1?1:e<0?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),o.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.jsNode=this.output=l.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=c(e.attackTime,this.defaults.attackTime.value),this.releaseTime=c(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){}},o.prototype.EnvelopeFollower.prototype=Object.create(h,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:d},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:d}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(l.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,n,o,r,i=e.inputBuffer.getChannelData(0).length,a=e.inputBuffer.numberOfChannels;if(n=o=r=0,a>1)for(r=0;r<i;++r)for(;n<a;++n)t=e.inputBuffer.getChannelData(n)[r],o+=t*t/a;else for(r=0;r<i;++r)t=e.inputBuffer.getChannelData(0)[r],o+=t*t;o=Math.sqrt(o),this._envelope<o?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*o):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*o),this._callback(this._target,this._envelope)}}}),o.prototype.LFO=function(e){this.output=l.createScriptProcessor(256,1,1),this.activateNode=l.destination,this.frequency=c(e.frequency,this.defaults.frequency.value),this.offset=c(e.offset,this.defaults.offset.value),this.oscillation=c(e.oscillation,this.defaults.oscillation.value),this.phase=c(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||!1},o.prototype.LFO.prototype=Object.create(h,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:d},offset:{value:.85,min:0,max:22049,automatable:!1,type:d},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:d},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:d}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?this.output.connect(l.destination):this.output.disconnect(l.destination)}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),o.toString=o.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.connectNode=n.audioContext.createGain(),o.connectNode.gain.value=e.gain,o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){var e=this.context.getMaster();e.busses[this.props.id]=this.connectNode}},{key:"componentWillReceiveProps",value:function(e){var t=this.context.getMaster();delete t.busses[this.props.id],this.connectNode.gain.value=e.gain,t.busses[e.id]=this.connectNode}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect(),delete this.context.getMaster().busses[this.props.id]}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);p.propTypes={children:c.PropTypes.node,gain:c.PropTypes.number,id:c.PropTypes.string.isRequired},p.defaultProps={gain:.5},p.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func},p.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func},t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Chorus({feedback:e.feedback,rate:e.rate,delay:e.delay,bypass:e.bypass}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bypass:c.PropTypes.number,children:c.PropTypes.node,delay:c.PropTypes.number,feedback:c.PropTypes.number,rate:c.PropTypes.number},h.defaultProps={bypass:0,delay:.0045,feedback:.2,rate:1.5},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.connectNode=n.audioContext.createDynamicsCompressor(),o.connectNode.connect(n.connectNode),o.applyProps=o.applyProps.bind(o),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){this.applyProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.applyProps(e)}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"applyProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t].value=e[t])}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);p.propTypes={attack:c.PropTypes.number,children:c.PropTypes.node,knee:c.PropTypes.number,ratio:c.PropTypes.number,release:c.PropTypes.number,threshold:c.PropTypes.number},p.defaultProps={attack:.003,knee:32,ratio:12,release:.25,threshold:-24},p.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},p.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Delay({feedback:e.feedback,delayTime:e.delayTime,wetLevel:e.wetLevel,dryLevel:e.dryLevel,cutoff:e.cutoff,bypass:e.bypass}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bypass:c.PropTypes.number,children:c.PropTypes.node,cutoff:c.PropTypes.number,delayTime:c.PropTypes.number,dryLevel:c.PropTypes.number,feedback:c.PropTypes.number,wetLevel:c.PropTypes.number},h.defaultProps={bypass:0,cutoff:2e3,delayTime:150,dryLevel:1,feedback:.45,wetLevel:.25},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),p=o(l),f=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.connectNode=n.audioContext.createBiquadFilter(),o.connectNode.connect(n.connectNode),o.applyProps=o.applyProps.bind(o),o}return a(t,e),c(t,[{key:"getChildContext",value:function(){return u({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){this.applyProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"applyProps",value:function(e){for(var t in e)this.connectNode[t]&&("object"===s(this.connectNode[t])?this.connectNode[t].value=e[t]:this.connectNode[t]=e[t])}},{key:"render",value:function(){return p["default"].createElement("span",null,this.props.children)}}]),t}(l.Component);f.propTypes={Q:l.PropTypes.number,children:l.PropTypes.node,frequency:l.PropTypes.number,gain:l.PropTypes.number,type:l.PropTypes.string},f.defaultProps={Q:0,frequency:2e3,gain:0,type:"lowpass"},f.contextTypes={audioContext:l.PropTypes.object,connectNode:l.PropTypes.object},f.childContextTypes={audioContext:l.PropTypes.object,connectNode:l.PropTypes.object},t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.connectNode=n.audioContext.createGain(),o.connectNode.gain.value=e.amount,o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){this.connectNode.gain.value=e.amount}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);p.propTypes={amount:c.PropTypes.number,children:c.PropTypes.node},p.defaultProps={amount:0},p.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},p.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(2),c=o(u),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.context.audioContext.createGain();e.gain.value=this.props.gain,this.osc=this.context.audioContext.createOscillator(),this.osc.frequency.value=this.props.frequency,this.osc.type=this.props.type,this.osc.connect(e),e.connect(this.props.connect(this.context.connectNode)),this.osc.start(this.context.audioContext.currentTime)}},{key:"componentWillUnmount",value:function(){this.osc.stop(),this.connectNode.disconnect()}},{key:"render",value:function(){return c["default"].createElement("span",null,this.props.children)}}]),t}(u.Component);l.displayName="Synth",l.propTypes={children:u.PropTypes.node,connect:u.PropTypes.func,frequency:u.PropTypes.number,gain:u.PropTypes.number,type:u.PropTypes.string},l.defaultProps={connect:function(e){return e.gain},frequency:1,gain:.5,type:"sine"},l.contextTypes={audioContext:u.PropTypes.object,connectNode:u.PropTypes.object},t["default"]=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(13),f=o(p),h=n(14),d=o(h),y=n(16),b=o(y),v=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getSteps=o.getSteps.bind(o),o.playStep=o.playStep.bind(o),o.connectNode=n.audioContext.createGain(),o.connectNode.gain.value=e.gain,o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){var e=this;this.id=b["default"].v1();var t=this.context.getMaster();t.instruments[this.id]=this.getSteps,this.amplitudeGain=this.context.audioContext.createGain(),this.amplitudeGain.gain.value=0,this.amplitudeGain.connect(this.connectNode),this.osc=this.context.audioContext.createOscillator(),this.osc.type=this.props.type,this.osc.connect(this.amplitudeGain),this.props.busses&&this.props.busses.forEach(function(n){t.busses[n]&&e.osc.connect(t.busses[n])}),this.osc.start(this.context.audioContext.currentTime)}},{key:"componentWillUnmount",value:function(){var e=this.context.getMaster();delete e.instruments[this.id],this.osc.stop(),this.connectNode.disconnect()}},{key:"getSteps",value:function(e){for(var t=this,n=this.context.getMaster().getMaxBars(),o=n/this.context.bars,r=function(n){var o=t.context.barInterval*t.context.bars*n/1e3,r=t.context.barInterval/t.context.resolution;t.props.steps.forEach(function(n,i){var a=o+n[0]*r/1e3,s=!1;if(0!==i){var u=o+t.props.steps[i-1][0]*r/1e3,c=t.props.steps[i-1][1]*r/1e3;s=u+c>a}t.context.scheduler.insert(e+a,t.playStep,{time:e,step:n,glide:s})})},i=0;i<o;i++)r(i)}},{key:"createOscillator",value:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],o=e[2],r=e[3],i=n.slice(0,-1)+(parseInt(n[n.length-1],0)+parseInt(this.props.transpose,0)),a=(0,d["default"])(this.context.audioContext,{attack:this.props.envelope.attack,decay:this.props.envelope.decay,sustain:this.props.envelope.sustain,release:this.props.envelope.release});a.connect(this.amplitudeGain.gain),this.osc.frequency.setTargetAtTime(f["default"].freq(i),t,r?this.props.glide:.001),a.start(t),a.stop(this.context.audioContext.currentTime+o)}},{key:"playStep",value:function(e){var t=e.args,n=t.step,o=t.glide,r=t.time,i=n[2],a=this.context.barInterval/this.context.resolution,s=n[1]*a/1e3;this.createOscillator(r,i,s,o)}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);v.displayName="Synth",v.propTypes={busses:c.PropTypes.array,children:c.PropTypes.node,envelope:c.PropTypes.shape({attack:c.PropTypes.number,decay:c.PropTypes.number,sustain:c.PropTypes.number,release:c.PropTypes.number}),gain:c.PropTypes.number,glide:c.PropTypes.number,steps:c.PropTypes.array.isRequired,transpose:c.PropTypes.number,type:c.PropTypes.string.isRequired},v.defaultProps={envelope:{attack:.01,decay:.2,sustain:.2,release:.2},gain:.5,glide:.1,transpose:0},v.contextTypes={audioContext:c.PropTypes.object,bars:c.PropTypes.number,barInterval:c.PropTypes.number,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func,resolution:c.PropTypes.number,scheduler:c.PropTypes.object,tempo:c.PropTypes.number},v.childContextTypes={audioContext:c.PropTypes.object,bars:c.PropTypes.number,barInterval:c.PropTypes.number,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func,resolution:c.PropTypes.number,scheduler:c.PropTypes.object,tempo:c.PropTypes.number},t["default"]=v},function(e,t){"use strict";function n(e,t){return Array(t+1).join(e)}function o(e){return"number"==typeof e}function r(e){return"string"==typeof e}function i(e){return"undefined"!=typeof e}function a(e,t){return Math.pow(2,(e-69)/12)*(t||440)}function s(){return d}function u(e,t,n){if("string"!=typeof e)return null;var o=d.exec(e);if(!o||!t&&o[4])return null;var r={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt="b"===r.acc[0]?-r.acc.length:r.acc.length;var i=y[r.step]+r.alt;return r.chroma=i<0?12+i:i%12,o[3]&&(r.oct=+o[3],r.midi=i+12*(r.oct+1),r.freq=a(r.midi,n)),t&&(r.tonicOf=o[4]),r}function c(e){return o(e)?e<0?n("b",-e):n("#",e):""}function l(e){return o(e)?""+e:""}function p(e,t,n){return null===e||"undefined"==typeof e?null:e.step?p(e.step,e.alt,e.oct):e<0||e>6?null:b.charAt(e)+c(t)+l(n)}function f(e){if((o(e)||r(e))&&e>=0&&e<128)return+e;var t=u(e);return t&&i(t.midi)?t.midi:null}function h(e,t){var n=f(e);return null===n?null:a(n,t)}var d=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,y=[0,2,4,5,7,9,11],b="CDEFGAB",v={parse:u,build:p,regex:s,midi:f,freq:h},m=["letter","acc","pc","step","alt","chroma","oct"];m.forEach(function(e){v[e]=function(t){var n=u(t);return n&&i(n[e])?n[e]:null}}),e.exports=v},function(e,t,n){"use strict";function o(e){return e?"linearRampToValueAtTime":"exponentialRampToValueAtTime"}function r(e,t,n,r){t.gain[o(e)](n,r)}function i(e,t){var n=e.createGain(),o=i.params(t,n),s="linear"===o.ramp,u=e.createGain();u.connect(n);var c=e.createGain();c.connect(u);var l=a(e);return l.connect(c),n.start=function(t){t=Math.max(t||0,e.currentTime),n.onstart&&n.onstart(t),l.start(t),c.gain.setValueAtTime(0,t),c.gain.setValueAtTime(.01,t+1e-6),r(s,c,o.l1,t+o.t1),r(s,c,o.l2,t+o.t1+o.t2),r(s,c,o.l3,t+o.t1+o.t2+o.t3),isFinite(o.duration)&&n.stop(t+o.duration)},n.stop=function(t){t=Math.max(t||0,e.currentTime),u.gain.cancelScheduledValues(t),u.gain.setValueAtTime(n.gain.value,t);var i=t+o.t4;if(r(s,u,1e-4,i),n.onended){var c=a(e,0);c.connect(e.destination),c.onended=n.onended,c.start(e.currentTime),c.stop(i)}return i},n}var a=n(15),s=function(e){return"number"==typeof e},u=["duration","t1","t2","t3","t4","l1","l2","l3"],c={duration:1/0,l1:1,l2:.2,l3:.8,t1:.01,t2:.1,t3:0,t4:.2};i.params=function(e,t){return t=t||{},e=e||{},u.forEach(function(n){t[n]=s(e[n])?e[n]:c[n]}),s(e.attack)&&(t.t1=e.attack),s(e.decay)&&(t.t2=e.decay),s(e.sustain)&&(t.l3=e.sustain),s(e.release)&&(t.t4=e.release),t.ramp="exponential"===e.ramp?e.ramp:"linear",t},e.exports=i},function(e,t){"use strict";e.exports=function(e,t){t=t||0===t?t:1;var n=e.createBuffer(1,2,e.sampleRate),o=n.getChannelData(0);o[0]=o[1]=t;var r=e.createBufferSource();return r.buffer=n,r.loop=!0,r}},function(e,t,n){function o(e,t,n){var o=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){r<16&&(t[o+r++]=c[e])});r<16;)t[o+r++]=0;return t}function r(e,t){var n=t||0,o=u;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}function i(e,t,n){var o=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:h,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:y+1,c=s-d+(u-y)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=s,y=u,h=a,s+=122192928e5;var l=(1e4*(268435455&s)+u)%4294967296;i[o++]=l>>>24&255,i[o++]=l>>>16&255,i[o++]=l>>>8&255,i[o++]=255&l;var p=s/4294967296*1e4&268435455;i[o++]=p>>>8&255,i[o++]=255&p,i[o++]=p>>>24&15|16,i[o++]=p>>>16&255,i[o++]=a>>>8|128,i[o++]=255&a;for(var b=e.node||f,v=0;v<6;v++)i[o+v]=b[v];return t?t:r(i)}function a(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[o+a]=i[a];return t||r(i)}for(var s=n(17),u=[],c={},l=0;l<256;l++)u[l]=(l+256).toString(16).substr(1),c[u[l]]=l;var p=s(),f=[1|p[0],p[1],p[2],p[3],p[4],p[5]],h=16383&(p[6]<<8|p[7]),d=0,y=0,b=a;b.v1=i,b.v4=a,b.parse=o,b.unparse=r,e.exports=b},function(e,t){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var o=new Uint8Array(16);n=function(){return crypto.getRandomValues(o),o}}if(!n){var r=new Array(16);n=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),
r[t]=e>>>((3&t)<<3)&255;return r}}e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.MoogFilter({cutoff:e.cutoff,resonance:e.resonance,bufferSize:e.bufferSize}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bufferSize:c.PropTypes.number,children:c.PropTypes.node,cutoff:c.PropTypes.number,resonance:c.PropTypes.number},h.defaultProps={bufferSize:4096,cutoff:.065,resonance:3.5},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Overdrive({outputGain:e.outputGain,drive:e.drive,curveAmount:e.curveAmount,algorithmIndex:e.algorithmIndex,bypass:e.bypass}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={algorithmIndex:c.PropTypes.number,bypass:c.PropTypes.number,children:c.PropTypes.node,curveAmount:c.PropTypes.number,drive:c.PropTypes.number,outputGain:c.PropTypes.number},h.defaultProps={algorithmIndex:0,bypass:0,curveAmount:1,drive:.7,outputGain:.5},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Phaser({rate:e.rate,depth:e.depth,feedback:e.feedback,stereoPhase:e.stereoPhase,baseModulationFrequency:e.baseModulationFrequency,bypass:e.bypass}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={baseModulationFrequency:c.PropTypes.number,bypass:c.PropTypes.number,children:c.PropTypes.node,depth:c.PropTypes.number,feedback:c.PropTypes.number,rate:c.PropTypes.number,stereoPhase:c.PropTypes.number},h.defaultProps={baseModulationFrequency:700,bypass:0,depth:.3,feedback:.2,rate:1.2,stereoPhase:30},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.PingPongDelay({wetLevel:e.wetLevel,feedback:e.feedback,delayTimeLeft:e.delayTimeLeft,delayTimeRight:e.delayTimeRight}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={children:c.PropTypes.node,delayTimeLeft:c.PropTypes.number,delayTimeRight:c.PropTypes.number,feedback:c.PropTypes.number,wetLevel:c.PropTypes.number},h.defaultProps={delayTimeLeft:150,delayTimeRight:200,feedback:.3,wetLevel:.5},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(4),f=o(p),h=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=new f["default"](n.audioContext);return o.connectNode=new a.Convolver({highCut:e.highCut,lowCut:e.lowCut,dryLevel:e.dryLevel,wetLevel:e.wetLevel,level:e.level,impulse:e.impulse,bypass:e.bypass}),o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentWillReceiveProps",value:function(e){for(var t in e)this.connectNode[t]&&(this.connectNode[t]=e[t])}},{key:"componentWillUnmount",value:function(){this.connectNode.disconnect()}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bypass:c.PropTypes.number,children:c.PropTypes.node,dryLevel:c.PropTypes.number,highCut:c.PropTypes.number,impulse:c.PropTypes.string,level:c.PropTypes.number,lowCut:c.PropTypes.number,wetLevel:c.PropTypes.number},h.defaultProps={bypass:0,dryLevel:1,highCut:22050,impulse:"reverb/room.wav",level:1,lowCut:20,wetLevel:1},h.contextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},h.childContextTypes={audioContext:c.PropTypes.object,connectNode:c.PropTypes.object},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(16),f=o(p),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{bars:this.props.bars,resolution:this.props.resolution})}},{key:"componentDidMount",value:function(){this.id=f["default"].v1();var e=this.context.getMaster();e.bars[this.id]=this.props.bars}},{key:"componentWillReceiveProps",value:function(e){var t=this.context.getMaster();t.bars[this.id]=e.bars}},{key:"componentWillUnmount",value:function(){delete this.context.getMaster().bars[this.id]}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={bars:c.PropTypes.number,children:c.PropTypes.node,resolution:c.PropTypes.number},h.defaultProps={bars:1,resolution:16},h.contextTypes={getMaster:c.PropTypes.func},h.childContextTypes={bars:c.PropTypes.number,getMaster:c.PropTypes.func,resolution:c.PropTypes.number},t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(u){r=!0,i=u}finally{try{!o&&s["return"]&&s["return"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),p=o(l),f=n(16),h=o(f),d=n(25),y=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.buffer=null,o.bufferLoaded=o.bufferLoaded.bind(o),o.getSteps=o.getSteps.bind(o),o.playStep=o.playStep.bind(o),o.connectNode=n.audioContext.createGain(),o.connectNode.gain.value=e.gain,o.connectNode.connect(n.connectNode),o}return a(t,e),c(t,[{key:"getChildContext",value:function(){return u({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){this.id=h["default"].v1();var e=this.context.getMaster();e.instruments[this.id]=this.getSteps,e.buffers[this.id]=1;var t=new d.BufferLoader(this.context.audioContext,[this.props.sample],this.bufferLoaded);t.load()}},{key:"componentWillReceiveProps",value:function(e){if(this.connectNode.gain.value=e.gain,this.props.sample!==e.sample){var t=this.context.getMaster();delete t.buffers[this.id],this.id=h["default"].v1(),t.buffers[this.id]=1;var n=new d.BufferLoader(this.context.audioContext,[e.sample],this.bufferLoaded);n.load()}}},{key:"componentWillUnmount",value:function(){var e=this.context.getMaster();delete e.buffers[this.id],delete e.instruments[this.id],this.connectNode.disconnect()}},{key:"getSteps",value:function(e){for(var t=this,n=this.context.getMaster().getMaxBars(),o=n/this.context.bars,r=function(n){var o=t.context.barInterval*t.context.bars*n/1e3,r=t.context.barInterval/t.context.resolution;t.props.steps.forEach(function(n){var i=Array.isArray(n)?n[0]:n,a=o+i*r/1e3;t.context.scheduler.insert(e+a,t.playStep,{time:e,step:n})})},i=0;i<o;i++)r(i)}},{key:"playStep",value:function(e){var t=this,n=this.context.audioContext.createBufferSource();n.buffer=this.buffer,n.detune&&(Array.isArray(e.args.step)?n.detune.value=100*(this.props.detune+e.args.step[1]):n.detune.value=this.props.detune),n.connect(this.connectNode),this.props.busses&&!function(){var e=t.context.getMaster();t.props.busses.forEach(function(t){e.busses[t]&&n.connect(e.busses[t])})}(),n.start(e.args.playbackTime),this.context.scheduler.nextTick(e.args.playbackTime+this.buffer.duration,function(){n.disconnect()})}},{key:"bufferLoaded",value:function(e){var t=s(e,1),n=t[0];this.buffer=n;var o=this.context.getMaster();delete o.buffers[this.id],this.context.bufferLoaded()}},{key:"render",value:function(){return p["default"].createElement("span",null,this.props.children)}}]),t}(l.Component);y.displayName="Sampler",y.propTypes={busses:l.PropTypes.array,children:l.PropTypes.node,detune:l.PropTypes.number,gain:l.PropTypes.number,sample:l.PropTypes.string.isRequired,steps:l.PropTypes.array.isRequired},y.defaultProps={detune:0,gain:.5},y.contextTypes={audioContext:l.PropTypes.object,bars:l.PropTypes.number,barInterval:l.PropTypes.number,bufferLoaded:l.PropTypes.func,connectNode:l.PropTypes.object,getMaster:l.PropTypes.func,resolution:l.PropTypes.number,scheduler:l.PropTypes.object,tempo:l.PropTypes.number},y.childContextTypes={audioContext:l.PropTypes.object,bars:l.PropTypes.number,barInterval:l.PropTypes.number,bufferLoaded:l.PropTypes.func,connectNode:l.PropTypes.object,getMaster:l.PropTypes.func,resolution:l.PropTypes.number,scheduler:l.PropTypes.object,tempo:l.PropTypes.number},t["default"]=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.BufferLoader=function(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=[],this.loadCount=0};n.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var o=this;n.onload=function(){o.context.decodeAudioData(n.response,function(n){return n?(o.bufferList[t]=n,void(++o.loadCount===o.urlList.length&&o.onload(o.bufferList))):void console.error("error decoding file data: "+e)},function(e){console.error("decodeAudioData error",e)})},n.onerror=function(){console.error("BufferLoader: XHR error")},n.send()},n.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(27),f=o(p),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={buffersLoaded:!1},n.barInterval=6e4/e.tempo*4,n.bars={},n.buffers={},n.instruments={},n.busses={},n.loop=n.loop.bind(n),n.bufferLoaded=n.bufferLoaded.bind(n),n.getMaster=n.getMaster.bind(n),n.getMaxBars=n.getMaxBars.bind(n),window.AudioContext=window.AudioContext||window.webkitAudioContext,n.audioContext=new AudioContext,n.scheduler=new f["default"]({context:n.audioContext}),n}return s(t,e),u(t,[{key:"getChildContext",value:function(){return{tempo:this.props.tempo,audioContext:this.audioContext,barInterval:this.barInterval,bufferLoaded:this.bufferLoaded,connectNode:this.audioContext.destination,getMaster:this.getMaster,scheduler:this.scheduler}}},{key:"componentDidMount",value:function(){0===Object.keys(this.buffers).length&&this.setState({buffersLoaded:!0})}},{key:"componentWillReceiveProps",value:function(e){this.barInterval=6e4/e.tempo*4}},{key:"componentDidUpdate",value:function(e,t){var n=this;t.buffersLoaded===this.state.buffersLoaded&&e.playing===this.props.playing||(this.state.buffersLoaded===!0&&this.props.playing===!0?setTimeout(function(){n.scheduler.start(n.loop)},0):this.scheduler.stop(!0))}},{key:"getMaster",value:function(){return this}},{key:"getMaxBars",value:function(){var e=this;return Math.max.apply(Math,r(Object.keys(this.bars).map(function(t){return e.bars[t]})))}},{key:"bufferLoaded",value:function(){0===Object.keys(this.buffers).length&&this.setState({buffersLoaded:!0})}},{key:"loop",value:function(e){var t=this,n=Object.keys(this.bars).length?this.getMaxBars():1;Object.keys(this.instruments).forEach(function(n){var o=t.instruments[n];o(e.playbackTime)}),this.scheduler.insert(e.playbackTime+this.barInterval*n/1e3,this.loop)}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);h.propTypes={children:c.PropTypes.node,playing:c.PropTypes.bool,tempo:c.PropTypes.number},h.defaultProps={playing:!1,tempo:90},h.childContextTypes={audioContext:c.PropTypes.object,barInterval:c.PropTypes.number,bufferLoaded:c.PropTypes.func,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func,scheduler:c.PropTypes.object,tempo:c.PropTypes.number},t["default"]=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){n(this,e),this.context=t.context,this.interval=.025,this.aheadTime=0,this.playbackTime=this.currentTime,this.timerID=0,this.scheduleID=0,this.schedules=[]}return o(e,[{key:"start",value:function(e,t){var n=this,o=function(){var e=n.context.currentTime,t=e+n.aheadTime;n.process(e,t)};return 0===this.timerID?(this.timerID=setInterval(o,1e3*this.interval),e&&(this.insert(this.context.currentTime,e,t),o())):this.insert(this.context.currentTime,e,t),this}},{key:"stop",value:function(e){return 0!==this.timerID&&(clearInterval(this.timerID),this.timerID=0),e&&this.schedules.splice(0),this}},{key:"insert",value:function(e,t,n){var o=++this.scheduleID,r={id:o,time:e,callback:t,args:n};if(0===this.schedules.length||this.schedules[this.schedules.length-1].time<=e)this.schedules.push(r);else for(var i=0,a=this.schedules.length;i<a;i++)if(e<this.schedules[i].time){this.schedules.splice(i,0,r);break}return o}},{key:"nextTick",value:function(e,t,n){return this.insert(e+this.aheadTime,t,n)}},{key:"remove",value:function(e){if("number"==typeof e)for(var t=0,n=this.schedules.length;t<n;t++)if(e===this.schedules[t].id){this.schedules.splice(t,1);break}return e}},{key:"removeAll",value:function(){this.schedules.splice(0)}},{key:"process",value:function(e,t){for(this.playbackTime=e;this.schedules.length&&this.schedules[0].time<t;){var n=this.schedules.shift(),o=n.time,r=n.args;this.playbackTime=o,n.callback({playbackTime:o,args:r})}this.playbackTime=e}}]),e}();t["default"]=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(2),l=o(c),p=n(13),f=o(p),h=n(14),d=o(h),y=n(16),b=o(y),v=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getSteps=o.getSteps.bind(o),o.playStep=o.playStep.bind(o),o.connectNode=n.audioContext.createGain(),o.connectNode.gain.value=e.gain,o.connectNode.connect(n.connectNode),o}return a(t,e),u(t,[{key:"getChildContext",value:function(){return s({},this.context,{connectNode:this.connectNode})}},{key:"componentDidMount",value:function(){this.id=b["default"].v1();var e=this.context.getMaster();e.instruments[this.id]=this.getSteps}},{key:"componentWillReceiveProps",value:function(e){this.connectNode.gain.value=e.gain}},{key:"componentWillUnmount",value:function(){var e=this.context.getMaster();delete e.instruments[this.id],this.connectNode.disconnect()}},{key:"getSteps",value:function(e){for(var t=this,n=this.context.getMaster().getMaxBars(),o=n/this.context.bars,r=function(n){var o=t.context.barInterval*t.context.bars*n/1e3,r=t.context.barInterval/t.context.resolution;t.props.steps.forEach(function(n){var i=o+n[0]*r/1e3;t.context.scheduler.insert(e+i,t.playStep,{time:e,step:n})})},i=0;i<o;i++)r(i)}},{key:"createOscillator",value:function(e,t,n){var o=this,r=this.context.audioContext.createGain();r.gain.value=0,r.connect(this.connectNode);var i=(0,d["default"])(this.context.audioContext,{attack:this.props.envelope.attack,decay:this.props.envelope.decay,sustain:this.props.envelope.sustain,release:this.props.envelope.release});i.connect(r.gain);var a=this.context.audioContext.createOscillator(),s=t.slice(0,-1)+(parseInt(t[t.length-1],0)+parseInt(this.props.transpose,0));a.frequency.value=f["default"].freq(s),a.type=this.props.type,a.connect(r),this.props.busses&&!function(){var e=o.context.getMaster();o.props.busses.forEach(function(t){e.busses[t]&&a.connect(e.busses[t])})}(),a.start(e),i.start(e);var u=i.stop(this.context.audioContext.currentTime+n);a.stop(u)}},{key:"playStep",value:function(e){var t=this,n=e.args,o=n.step,r=n.time,i=o[2],a=this.context.barInterval/this.context.resolution,s=o[1]*a/1e3;Array.isArray(i)?i.forEach(function(e){t.createOscillator(r,e,s)}):this.createOscillator(r,i,s)}},{key:"render",value:function(){return l["default"].createElement("span",null,this.props.children)}}]),t}(c.Component);v.displayName="Synth",v.propTypes={busses:c.PropTypes.array,children:c.PropTypes.node,envelope:c.PropTypes.shape({attack:c.PropTypes.number,decay:c.PropTypes.number,sustain:c.PropTypes.number,release:c.PropTypes.number}),gain:c.PropTypes.number,steps:c.PropTypes.array.isRequired,transpose:c.PropTypes.number,type:c.PropTypes.string.isRequired},v.defaultProps={envelope:{attack:.01,decay:.2,sustain:.2,release:.2},gain:.5,transpose:0},v.contextTypes={audioContext:c.PropTypes.object,bars:c.PropTypes.number,barInterval:c.PropTypes.number,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func,resolution:c.PropTypes.number,scheduler:c.PropTypes.object,tempo:c.PropTypes.number},v.childContextTypes={audioContext:c.PropTypes.object,bars:c.PropTypes.number,barInterval:c.PropTypes.number,connectNode:c.PropTypes.object,getMaster:c.PropTypes.func,resolution:c.PropTypes.number,scheduler:c.PropTypes.object,tempo:c.PropTypes.number},t["default"]=v}])});
//# sourceMappingURL=react-music.min.js.map